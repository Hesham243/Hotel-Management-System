{% extends 'base.html' %}
{% load static %}
{% block head %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{% static 'css/booking_form.css' %}">
{% endblock %}
{% block content %}
<div class="reservation-container">
  <h2 class="reservation-title">
    <i class="fa-solid fa-bed"></i>
    {% if form.instance.pk %}Edit Booking{% else %}Room Reservation{% endif %}
  </h2>

  {% if form.non_field_errors %}
    <div class="form-error">
      {% for error in form.non_field_errors %}
        <div>{{ error }}</div>
      {% endfor %}
    </div>
  {% endif %}

  {% if room_obj %}
    <section class="room-summary">
      <div class="room-info">
        <i class="fa-solid fa-hotel"></i> <strong>Hotel:</strong> {{ room_obj.hotel.name }}<br>
        <i class="fa-solid fa-door-closed"></i> <strong>Room Type:</strong> {{ room_obj.type }}<br>
        <i class="fa-solid fa-users"></i> <strong>Max Occupancy:</strong> {{ room_obj.max_occupancy }}<br>
        <i class="fa-solid fa-dollar-sign"></i> <strong>Price/Night:</strong> ${{ room_obj.price }}
      </div>
    </section>
  {% endif %}



  <form method="post" class="booking-form">
    {% csrf_token %}
    <div class="form-fields">
      {% if form.room.value %}
        {{ form.room }}
        <div class="form-group">
          <label for="id_check_in_date"><i class="fa-solid fa-calendar-check"></i> Check-in Date</label>
          {{ form.check_in_date }}
          {% if form.check_in_date.errors %}<span class="form-error-inline">{{ form.check_in_date.errors.0 }}</span>{% endif %}
        </div>
        <div class="form-group">
          <label for="id_check_out_date"><i class="fa-solid fa-calendar-day"></i> Check-out Date</label>
          {{ form.check_out_date }}
          {% if form.check_out_date.errors %}<span class="form-error-inline">{{ form.check_out_date.errors.0 }}</span>{% endif %}
        </div>
        <div class="form-group">
          <label for="id_num_guests"><i class="fa-solid fa-user-friends"></i> Number of Guests</label>
          {{ form.num_guests }}
          {% if form.num_guests.errors %}<span class="form-error-inline">{{ form.num_guests.errors.0 }}</span>{% endif %}
        </div>
      {% else %}
        {% for field in form.visible_fields %}
          <div class="form-group">
            {{ field.label_tag }} {{ field }}
            {% if field.errors %}<span class="form-error-inline">{{ field.errors.0 }}</span>{% endif %}
          </div>
        {% endfor %}
      {% endif %}
    </div>

    {% if total_nights and total_price %}
      <div class="form-summary">
        <i class="fa-solid fa-moon"></i> <strong>Total Nights:</strong> {{ total_nights }}<br>
        <i class="fa-solid fa-money-bill"></i> <strong>Total Price:</strong> ${{ total_price }}
      </div>
    {% endif %}

    <div class="form-actions">
      <button type="submit" class="btn submit"><i class="fa-solid fa-check"></i> Book Now</button>
      <a href="{% url 'booking-index' %}" class="btn secondary"><i class="fa-solid fa-times"></i> Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
